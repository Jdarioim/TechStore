<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-900 text-white">

<main class="flex min-h-screen items-center justify-center">
  <section class="flex w-[30rem] flex-col space-y-6">
    <div class="text-center text-4xl font-medium">Log In</div>

    <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
      <input id="login-email" type="text" placeholder="Email" class="w-full bg-transparent outline-none placeholder:italic focus:outline-none">
    </div>

    <div class="w-full transform border-b-2 bg-transparent text-lg duration-300 focus-within:border-indigo-500">
      <input id="login-password" type="password" placeholder="Password" class="w-full bg-transparent outline-none placeholder:italic focus:outline-none">
    </div>

    <button id="login-button" class="rounded-sm bg-indigo-600 py-2 font-bold duration-300 hover:bg-indigo-400">
      LOG IN
    </button>
    
    <button id="google-login-button" class="rounded-sm bg-red-500 py-2 font-bold duration-300 hover:bg-red-400 mt-4">
      Sign in with Google
    </button>

    <p class="text-center">¿No tienes una cuenta? 
      <a href="register.html" class="text-indigo-400 underline">Regístrate</a>
    </p>
  </section>
</main>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js"></script>

<!-- Script para login y Google login -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAGnDr9i47yfWEYNLo0V68y-otgdqpMgA0",
    authDomain: "practicaoctav.firebaseapp.com",
    projectId: "practicaoctav",
    storageBucket: "practicaoctav.appspot.com",
    messagingSenderId: "153600882071",
    appId: "1:153600882071:web:3bf7ea10ea2e5d966a40d2"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const loginButton = document.getElementById("login-button");
  const googleLoginButton = document.getElementById("google-login-button");

  // Iniciar sesión con correo y contraseña
  loginButton.addEventListener("click", async () => {
    const email = document.getElementById("login-email").value;
    const password = document.getElementById("login-password").value;

    try {
      const userCredential = await signInWithEmailAndPassword(auth, email, password);
      alert("Login exitoso");
      window.location.href = "index.html"; // Redirecciona al index
    } catch (error) {
      console.error("Error en el inicio de sesión:", error);
      alert("Error en el inicio de sesión. Verifica tus credenciales.");
    }
  });

  // Iniciar sesión con Google
  googleLoginButton.addEventListener("click", async () => {
    const provider = new GoogleAuthProvider();

    try {
      const result = await signInWithPopup(auth, provider);
      alert("Inicio de sesión con Google exitoso");
      window.location.href = "index.html"; // Redirecciona al index
    } catch (error) {
      console.error("Error en el inicio de sesión con Google:", error);
      alert("No se pudo iniciar sesión con Google.");
    }
  });
</script>
</body>
</html>
